<!-- launch/gimbal_control.launch -->
<launch>
  <!-- 加载URDF到参数服务器 -->
  <param name="robot_description" 
         command="$(find xacro)/xacro --inorder '$(find u_shaped_gimbal_description)/urdf/u_shaped_gimbal.urdf'" />

  <!-- 启动joint_state_publisher -->
  <node name="joint_state_publisher" pkg="joint_state_publisher" type="joint_state_publisher">
    <param name="use_gui" value="false"/>
  </node>

  <!-- 启动robot_state_publisher -->
  <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher"/>

  <!-- 加载控制器配置 -->
  <rosparam file="$(find u_shaped_gimbal_control)/config/controllers.yaml" command="load"/>

  <!-- 启动控制器管理器 -->
  <node name="controller_spawner" pkg="controller_manager" type="spawner" 
        args="gimbal_controller joint_state_controller"/>

  <!-- 启动RViz -->
  <node name="rviz" pkg="rviz" type="rviz" args="-d $(find u_shaped_gimbal_control)/config/gimbal.rviz"/>

  <!-- 启动控制节点 -->
  <node name="gimbal_control_node" pkg="u_shaped_gimbal_control" type="gimbal_controller.py" output="screen"/>
</launch>